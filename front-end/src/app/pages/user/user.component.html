<div *ngIf="isLoading" class="overlay">
  <div class="spinner" role="status">
    <span class="app-spinner"></span>
  </div>
</div>

<div class="bg-dark text-white p-3 m-4 rounded-3" *ngIf="!isLoading">

  <div class="flex">
    <h2>Modifca Utente</h2>
    <div class="container-logo">
      <img src="{{urlImg}}" alt="" class="logo">
    </div>
  </div>
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="mt-4">

    <div class="form-group">
      <label for="name">Nome</label>
      <input type="text" id="name" formControlName="name" class="form-control">
      <div *ngIf="formControls['name'] && formControls['name']!.invalid && (formControls['name']!.dirty || formControls['name']!.touched)" class="error-message">
        <div *ngIf="formControls['name']!.errors && formControls['name']!.errors['required']" class="error-text">Il campo nome non può essere vuoto</div>
        <div *ngIf="formControls['name']!.errors && formControls['name']!.errors['minlength']" class="error-text">Il nome deve essere composto da almeno 3 caratteri</div>
      </div>
    </div>

    <div class="form-group">
      <label for="surname">Cognome</label>
      <input type="text" id="surname" formControlName="surname" class="form-control">
      <div *ngIf="formControls['surname'] && formControls['surname']!.invalid && (formControls['surname']!.dirty || formControls['surname']!.touched)" class="error-message">
        <div *ngIf="formControls['surname']!.errors && formControls['surname']!.errors['required']" class="error-text">Il campo cognome non può essere vuoto</div>
        <div *ngIf="formControls['surname']!.errors && formControls['surname']!.errors['minlength']" class="error-text">Il cognome deve essere composto da almeno 3 caratteri</div>
      </div>
    </div>


    <div class="form-group">
      <label for="coverImage">Aggiungi il tuo logo personale</label>
      <input type="file" id="coverImage" class="form-control" #fileInput (change)="onFileSelected($event)">
    </div>

    <div class="form-group">
      <label for="dateOfBirth">Data di Nascita</label>
      <input type="date" id="dateOfBirth" formControlName="dateOfBirth" class="form-control">
      <div *ngIf="formControls['dateOfBirth'] && formControls['dateOfBirth']!.invalid && (formControls['dateOfBirth']!.dirty || formControls['dateOfBirth']!.touched)" class="error-message">
        <div *ngIf="formControls['dateOfBirth']!.errors && formControls['dateOfBirth']!.errors['required']" class="error-text">Il campo data di nascita non può essere vuoto</div>
        <div *ngIf="formControls['dateOfBirth']!.errors && formControls['dateOfBirth']!.errors['minlength']" class="error-text">La data di nascita deve essere composta da almeno 3 caratteri</div>
      </div>
    </div>



    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" formControlName="email" class="form-control">
      <div *ngIf="formControls['email'] && formControls['email']!.invalid && (formControls['email']!.dirty || formControls['email']!.touched)" class="error-message">
        <div *ngIf="formControls['email']!.errors && formControls['email']!.errors['required']" class="error-text">Il campo email non può essere vuoto</div>
        <div *ngIf="formControls['email']!.errors && formControls['email']!.errors['email']" class="error-text">Email non valida</div>
      </div>
    </div>

    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" id="username" formControlName="username" class="form-control">
      <div *ngIf="formControls['username'] && formControls['username']!.invalid && (formControls['username']!.dirty || formControls['username']!.touched)" class="error-message">
        <div *ngIf="formControls['username']!.errors && formControls['username']!.errors['required']" class="error-text">Il campo username non può essere vuoto</div>
        <div *ngIf="formControls['username']!.errors && formControls['username']!.errors['minlength']" class="error-text">L'username deve essere composto da almeno 5 caratteri</div>
      </div>
    </div>



    <div class="flex">
      <button type="submit" [disabled]="userForm.invalid" class="btn btn-primary my-3">Modifica Utente</button>
      <button class="btn btn-warning" routerLink="/user/modifica/password/{{username}}">Modifca Password</button>
    </div>
  </form>



</div>
